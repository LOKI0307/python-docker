{
	"$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
	"contentVersion": "1.0.0.0",
	"parameters": {
		"webTestName": {
			"type": "string"
		},
		"appName": {
			"type": "string"
		},
		"URL": {
			"type": "string"
		},
		"actionGroupId": {
			"type": "string"
		},
		"location": {
			"type": "string"
		}
	},
	"variables": {

		"pingTestName": "[parameters('appName')]"
	},
	"resources": [
        {
            "id": "[resourceId('Microsoft.Insights/components', parameters('appName'))]",
            "apiVersion": "2014-04-01",
            "kind": "web",
            "location": "Central US",
            "name": "[parameters('appName')]",
            "properties": {
              
              "Application_Type": "web",
              "Flow_Type": "Brownfield",
              "Request_Source": "VSIX3.3.1.0",
              "Name": "[parameters('appName')]",
              "PackageId": null,
              "ApplicationId": "[parameters('appName')]"
            },
            "tags": { },
            "type": "microsoft.insights/components"
          },
          {
            "id": "[resourceId('Microsoft.Insights/webtests', variables('pingTestName'))]",
            "name": "[variables('pingTestName')]",
            "apiVersion": "2022-06-15",
            "type": "microsoft.insights/webtests",
            "location": "Central US",
            "tags": {
                "[concat('hidden-link:', resourceId('microsoft.insights/components', parameters('appName')))]": "Resource"
              },
            "properties": {
                "provisioningState": "Succeeded",
                "Name": "[parameters('webTestName')]",
                "Description": "",
                "Enabled": true,
                "Frequency": 900,
                "Timeout": 120,
                "Kind": "ping",
                "RetryEnabled": true,
                "Locations": [
                  {
                    "Id": "us-va-ash-azr"
                  }
                ],
                "Configuration": {"WebTest": "[concat('<WebTest   Name=\"', variables('pingTestName'), '\"   Enabled=\"True\"         CssProjectStructure=\"\"    CssIteration=\"\"  Timeout=\"120\"  WorkItemIds=\"\"         xmlns=\"http://microsoft.com/schemas/VisualStudio/TeamTest/2010\"         Description=\"\"  CredentialUserName=\"\"  CredentialPassword=\"\"         PreAuthenticate=\"True\"  Proxy=\"default\"  StopOnError=\"False\"         RecordedResultFile=\"\"  ResultsLocale=\"\">  <Items>  <Request Method=\"GET\"    Version=\"1.1\"  Url=\"', parameters('URL'),   '\" ThinkTime=\"0\"  Timeout=\"300\" ParseDependentRequests=\"True\"         FollowRedirects=\"True\" RecordResult=\"True\" Cache=\"False\"         ResponseTimeGoal=\"0\"  Encoding=\"utf-8\"  ExpectedHttpStatusCode=\"200\"         ExpectedResponseUrl=\"\" ReportingName=\"\" IgnoreHttpStatusCode=\"False\" />        </Items>  <ValidationRules> <ValidationRule  Classname=\"Microsoft.VisualStudio.TestTools.WebTesting.Rules.ValidationRuleFindText, Microsoft.VisualStudio.QualityTools.WebTestFramework, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a\" DisplayName=\"Find Text\"         Description=\"Verifies the existence of the specified text in the response.\"         Level=\"High\"  ExecutionOrder=\"BeforeDependents\">  <RuleParameters>        <RuleParameter Name=\"FindText\" Value=\"',   '\" />  <RuleParameter Name=\"IgnoreCase\" Value=\"False\" />  <RuleParameter Name=\"UseRegularExpression\" Value=\"False\" />  <RuleParameter Name=\"PassIfTextFound\" Value=\"True\" />  </RuleParameters> </ValidationRule>  </ValidationRules>  </WebTest>')]"},
                "SyntheticMonitorId": "[variables('webTestName')]"
            }
          }
          
	]

}